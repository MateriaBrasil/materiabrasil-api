"$schema": http://json-schema.org/draft-04/hyper-schema
title: MateriaBrasil - Message
description: A message is a communication from a user to a supplier
stability: prototype
type:
  - object
definitions:
  id:
    description: unique identifier of the message
    readOnly: true
    type:
      - integer
  text:
    description: the text of the message
    type:
      - string
  from:
    description: the author of the message
    type:
      - object
    targetSchema:
      "$ref": "/schemata/user"
  to:
    description: the recipient of the message
    type:
      - object
    targetSchema:
      anyOf:
        - "$ref": "/schemata/user"
        - "$ref": "/schemata/supplier"
  created_at:
    description: when the message was created
    format: date-time
    type:
      - string
  to_id:
    description: the id of the supplier to which the message is sent
    type:
      - integer
  to_type:
    description: the type of object to which the message is sent
    type:
      - string
    enum:
      - Supplier
      - User
  identity:
    anyOf:
      - "$ref": "/schemata/message#/definitions/id"
links:
  - description: Create a new message.
    href: "/messages"
    method: POST
    rel: create
    schema:
      strictProperties: true
      properties:
        to_id:
          "$ref": "/schemata/message#/definitions/to_id"
        to_type:
          "$ref": "/schemata/message#/definitions/to_type"
        text:
          "$ref": "/schemata/message#/definitions/text"
      type:
        - object
    targetSchema:
      anyOf:
        - "$ref": "/schemata/message"
        - "$ref": "/schemata/error"
    title: Create
properties:
  id:
    "$ref": "/schemata/message#/definitions/id"
  from:
    "$ref": "/schemata/message#/definitions/from"
  to:
    "$ref": "/schemata/message#/definitions/to"
  text:
    "$ref": "/schemata/message#/definitions/text"
  created_at:
    "$ref": "/schemata/message#/definitions/created_at"
additionalProperties: false
id: schemata/message
